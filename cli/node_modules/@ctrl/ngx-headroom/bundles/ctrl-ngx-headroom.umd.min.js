!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/animations"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/animations","@angular/core","@angular/common"],e):e((t.ctrl=t.ctrl||{},t.ctrl["ngx-headroom"]={}),t.ng.animations,t.ng.core,t.ng.common)}(this,function(t,e,n,i){"use strict";var r=function(){function t(){this.wrapperClassName="",this.innerClassName="",this.innerStyle={top:"0",left:"0",right:"0",zIndex:"1",position:"relative"},this.wrapperStyle={},this.disable=!1,this.upTolerance=5,this.downTolerance=0,this.pinStart=0,this.calcHeightOnResize=!0,this.duration=200,this.easing="ease-in-out",this.pin=new n.EventEmitter,this.unpin=new n.EventEmitter,this.unfix=new n.EventEmitter,this.wrapperHeight=0,this.currentScrollY=0,this.lastKnownScrollY=0,this.scrolled=!1,this.resizeTicking=!1,this.state="unfixed",this.translateY="0px",this.scrollTicking=!1,this.parent=function(){return window}}return t.prototype.ngOnInit=function(){this.innerStyle.transform="translateY("+this.translateY+")",this.disable&&!this.disable?(this.handleUnfix(),this.parent().removeEventListener("scroll",this.handleScroll),this.parent().removeEventListener("resize",this.handleResize)):!this.disable&&this.disable&&(this.parent().addEventListener("scroll",this.handleScroll),this.calcHeightOnResize&&this.parent().addEventListener("resize",this.handleResize))},t.prototype.ngAfterContentInit=function(){var t=this;this.setHeightOffset(),this.disable||(this.parent().addEventListener("scroll",function(){return t.handleScroll()}),this.calcHeightOnResize&&this.parent().addEventListener("resize",function(){return t.handleResize()})),this.wrapperHeight=this.height?this.height:null},t.prototype.ngOnDestroy=function(){this.parent().removeEventListener("scroll",this.handleScroll),this.parent().removeEventListener("scroll",this.handleScroll),this.parent().removeEventListener("resize",this.handleResize)},t.prototype.setHeightOffset=function(){this.height=this.inner.nativeElement.offsetHeight,this.resizeTicking=!1},t.prototype.getScrollY=function(){return this.parent().pageYOffset!==undefined?this.parent().pageYOffset:this.parent().scrollTop!==undefined?this.parent().scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},t.prototype.getViewportHeight=function(){return this.parent().innerHeight||document.documentElement.clientHeight||document.body.clientHeight},t.prototype.getDocumentHeight=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)},t.prototype.getElementPhysicalHeight=function(t){return Math.max(t.offsetHeight,t.clientHeight)},t.prototype.getElementHeight=function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},t.prototype.getScrollerPhysicalHeight=function(){var t=this.parent();return t===this.parent()||t===document.body?this.getViewportHeight():this.getElementPhysicalHeight(t)},t.prototype.getScrollerHeight=function(){var t=this.parent();return t===this.parent()||t===document.body?this.getDocumentHeight():this.getElementHeight(t)},t.prototype.isOutOfBound=function(t){var e=t<0,n=this.getScrollerPhysicalHeight(),i=this.getScrollerHeight();return e||t+n>i},t.prototype.handleScroll=function(){this.scrollTicking||(this.scrollTicking=!0,this.update())},t.prototype.handleResize=function(){this.resizeTicking||(this.resizeTicking=!0,this.setHeightOffset())},t.prototype.handleUnpin=function(){this.unpin.emit(),this.state="unpinned",this.innerStyle.position=this.disable||"unfixed"===this.state?"relative":"fixed"},t.prototype.handlePin=function(){this.pin.emit(),this.state="pinned",this.innerStyle.position=this.disable||"unfixed"===this.state?"relative":"fixed"},t.prototype.handleUnfix=function(){this.unfix.emit(),this.state="unfixed",this.innerStyle.position=this.disable||"unfixed"===this.state?"relative":"fixed"},t.prototype.update=function(){if(this.currentScrollY=this.getScrollY(),!this.isOutOfBound(this.currentScrollY)){var t=function(t,e,n,i,r,s,o,a){void 0===t&&(t=0),void 0===e&&(e=0);var l=e>=t?"down":"up",h=Math.abs(e-t);return n?{action:"none",scrollDirection:l,distanceScrolled:h}:e<=i&&"unfixed"!==o?{action:"unfix",scrollDirection:l,distanceScrolled:h}:e<=a&&"down"===l&&"unfixed"===o?{action:"none",scrollDirection:l,distanceScrolled:h}:"down"===l&&["pinned","unfixed"].indexOf(o)>=0&&e>a+i&&h>r?{action:"unpin",scrollDirection:l,distanceScrolled:h}:"up"===l&&h>s&&["pinned","unfixed"].indexOf(o)<0?{action:"pin",scrollDirection:l,distanceScrolled:h}:"up"===l&&e<=a&&["pinned","unfixed"].indexOf(o)<0?{action:"pin",scrollDirection:l,distanceScrolled:h}:{action:"none",scrollDirection:l,distanceScrolled:h}}(this.lastKnownScrollY,this.currentScrollY,this.disable,this.pinStart,this.downTolerance,this.upTolerance,this.state,this.height).action;"pin"===t?this.handlePin():"unpin"===t?this.handleUnpin():"unfix"===t&&this.handleUnfix()}this.lastKnownScrollY=this.currentScrollY,this.scrollTicking=!1},t}();r.decorators=[{type:n.Component,args:[{selector:"ngx-headroom",template:'\n  <div [ngStyle]="wrapperStyle"\n    [style.height.px]="wrapperHeight"\n    class="headroom-wrapper {{ wrapperClassName }}"\n  >\n    <div #ref\n      [ngStyle]="innerStyle"\n      [@headroom]="{\n        value: state,\n        params: {\n          duration: duration,\n          easing: easing\n        }\n      }"\n      [class]="innerClassName"\n      [class.headroom]="true"\n      [class.headroom--unfixed]="state === \'unfixed\'"\n      [class.headroom--unpinned]="state === \'unpinned\'"\n      [class.headroom--pinned]="state === \'pinned\'"\n      [class.headroom--unfixed]="state === \'unfixed\'"\n    >\n      <ng-content></ng-content>\n    </div>\n  </div>\n  ',animations:[e.trigger("headroom",[e.state("unfixed",e.style({transform:"translateY(0)"})),e.state("unpinned",e.style({transform:"translateY(-100%)"})),e.state("pinned",e.style({transform:"translateY(0px)"})),e.transition("unpinned <=> pinned",e.animate("{{ duration }}ms {{ easing }}"))])],preserveWhitespaces:!1}]}],r.ctorParameters=function(){return[]},r.propDecorators={wrapperClassName:[{type:n.Input}],innerClassName:[{type:n.Input}],innerStyle:[{type:n.Input}],wrapperStyle:[{type:n.Input}],disable:[{type:n.Input}],upTolerance:[{type:n.Input}],downTolerance:[{type:n.Input}],pinStart:[{type:n.Input}],calcHeightOnResize:[{type:n.Input}],duration:[{type:n.Input}],easing:[{type:n.Input}],pin:[{type:n.Output}],unpin:[{type:n.Output}],unfix:[{type:n.Output}],inner:[{type:n.ViewChild,args:["ref"]}],parent:[{type:n.Input}]};var s=function(){return function(){}}();s.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule],exports:[r],declarations:[r]}]}],s.ctorParameters=function(){return[]},t.HeadroomModule=s,t.HeadroomComponent=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ctrl-ngx-headroom.umd.min.js.map
